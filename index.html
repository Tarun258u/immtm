<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IM : MTM Demo </title>
  <meta name="description" content="Interactive demo showing how IM (Initial Margin) and MTM (Variation Margin) work — use G-Secs for IM to earn coupon income."/>

<section class="card visual">
      <div class="row"><div class="badge">Margin Structure</div><div class="badge"> </div></div>

      <div class="row"><div>Initial Margin (IM)</div><div class="arrow">→</div><div class="row"> G‑Secs</div></div>
      <div class="note">IM is typically calculated to cover potential future exposure. Using Indian government bonds (G‑Secs) as margin allows FPIs to post securities that also yield coupons at a risk free rate.</div>

      <div style="height:8px"></div>

      <div class="row"><div>Mark‑to‑Market (MTM)</div><div class="arrow">→</div><div class="row"> Cash</div></div>
      <div class="note">MTM covers day‑to‑day changes in market value and must remain highly liquid usually posted in cash.</div>

      <div class="flow" aria-hidden="true">
        <div class="box">
          <strong style="color:var(--muted)">FPIs provide:</strong> <br><br>
          <div style="font-size:16px;margin-top:8px;color:var(--white)"> G‑Secs + Cash          </div><br><br>
        </div>
        <div class="arrow">→</div>
        <div class="box">
          <strong style="color:var(--muted)">Clearing Member</strong>
          <div style="font-size:14px;margin-top:6px;color:var(--white)">Accepts IM and MTM and places the same with CCP</div>
        </div>
        <div class="arrow">→</div>
        <div class="box">
          <strong style="color:var(--muted)">Benefit for FPI</strong>
          <div style="font-size:14px;margin-top:6px;color:var(--white)">FPI takes position in derivatives + Earns interest income G-sec Coupons </div>
        </div>
      </div>

      <div style="margin-top:12px;color:var(--muted);font-size:13px">Note: When posting G‑Secs as IM, Central Counter Parties (CCPs) usually apply a haircut to account for market risk. Hence margins provided against G-secs are slightly reduced</div>

    </section>
  <style>
    :root{
      --bg:#071326; --card:#071923; --muted:#9fb3c2; --accent:#00c2a8; --gsec:#2b9df4; --cash:#f59e0b; --glass: rgba(255,255,255,0.03);
      --white:#e6eef3; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{background:linear-gradient(180deg,var(--bg),#031022);color:var(--white);margin:0;padding:28px;min-height:100vh}
    .container{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:360px 1fr;gap:20px;align-items:start}
    header{grid-column:1/-1;margin-bottom:6px}
    h1{margin:0;font-size:20px}
    p.lead{color:var(--muted);margin:6px 0 18px;font-size:14px}
    .card{background:linear-gradient(180deg,var(--card),#031b29);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    .visual{display:flex;flex-direction:column;align-items:center;gap:12px}
    svg.donut{width:280px;height:280px}
    .legend{display:flex;gap:12px;margin-top:6px;flex-wrap:wrap}
    .legend .item{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:13px}
    .sw{width:14px;height:14px;border-radius:4px}
    .controls{display:grid;gap:12px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    .range-wrap{display:flex;gap:8px;align-items:center}
    input[type="range"]{width:100%}
    input[type="number"]{background:transparent;border:1px solid rgba(255,255,255,0.05);color:var(--white);padding:8px;border-radius:8px;width:100%}
    .row{display:flex;gap:10px;align-items:center}
    .muted{color:var(--muted);font-size:13px}
    .big{font-size:20px;color:var(--white);font-weight:600}
    .small{font-size:13px;color:var(--muted)}
    .btn{background:var(--accent);border:none;padding:10px 12px;border-radius:8px;color:#042826;font-weight:700;cursor:pointer}
    .flow{display:flex;gap:10px;align-items:center;margin-top:10px}
    .flow .box{flex:1;padding:10px;border-radius:10px;background:linear-gradient(180deg,#06232d,#05242d);border:1px solid rgba(255,255,255,0.03);text-align:center}
    footer{grid-column:1/-1;margin-top:18px;color:var(--muted);font-size:13px}
    @media (max-width:980px){.container{grid-template-columns:1fr} .visual{order:1}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>IM : MTM Demo</h1>
      <p class="lead">Initial Margin (IM)</strong> and <strong>Mark‑to‑Market (MTM)</strong>. IM is satisfied primarily with Indian Government Securities (G‑Secs) which generates interest income in the form of coupon payments, MTM is typically held in cash.</p>
    </header>



    <section class="card visual">
      <svg class="donut" viewBox="0 0 200 200">
        <g transform="translate(100,100)">
          <circle r="70" fill="transparent" stroke="rgba(255,255,255,0.05)" stroke-width="28"></circle>
          <circle id="imArc" r="70" fill="transparent" stroke="var(--gsec)" stroke-width="28" stroke-linecap="round" transform="rotate(-90)"></circle>
          <circle id="mtmArc" r="70" fill="transparent" stroke="var(--cash)" stroke-width="28" stroke-linecap="round" transform="rotate(-90)"></circle>
          <text x="0" y="-6" text-anchor="middle" font-size="12" fill="var(--muted)">IM • MTM</text>
          <text x="0" y="12" text-anchor="middle" font-size="18" fill="var(--white)" font-weight="700" id="ratioLabel">90 : 10</text>
        </g>
      </svg>
      <div class="legend">
        <div class="item"><span class="sw" style="background:var(--gsec)"></span>IM — G-Secs</div>
        <div class="item"><span class="sw" style="background:var(--cash)"></span>MTM — Cash</div>
      </div>
      
    </section>

    <section class="card controls">
      <div>
        <label>IM percentage</label>
        <div class="range-wrap">
          <input id="imRange" type="range" min="50" max="90" value="80">
          <div id="imPercent" class="big">90%</div>
        </div>
      </div>

      <div>
        <label>Derivative Exposure (USD)</label>
        <input id="principal" type="number" value="1000000" step="1000">
      </div>

      <div>
        <label>G-Sec coupon (annual %)</label>
        <input id="coupon" type="number" value="6" step="0.1">
      </div>

	<div>
        <label>Haircut (%)</label>
        <input id="haircut" type="number" value="0" step="0.1">
      </div>

      <div>
        <div class="small muted">Annual coupon income </div>
        <div id="couponIncome" class="big">$54,000</div>
      </div>

      <div>
        <div class="small muted">MTM (cash portion)</div>
        <div id="mtmValue" class="big">$250,000</div>
      </div>

	<div>
        <div class="small muted">IM (G-secs portion)</div>
        <div id="imValue" class="big">$1,000,000</div>
      </div>
    </section>



	



    <footer>
      Created by <strong>Tarun Agarwal</strong> for educational and illustrative purposes.
    </footer>
  </div>

  <script>
    (function(){
      const imRange=document.getElementById('imRange'),imLabel=document.getElementById('imPercent'),
      ratio=document.getElementById('ratioLabel'),imArc=document.getElementById('imArc'),
      mtmArc=document.getElementById('mtmArc'),principal=document.getElementById('principal'),
      coupon=document.getElementById('coupon'),couponIncome=document.getElementById('couponIncome'), haircut=document.getElementById('haircut'),
      mtmValue=document.getElementById('mtmValue'),btn=document.getElementById('simAirdrop');
      const r=70,circ=2*Math.PI*r;
      function updateArcs(p){
        const f=p/100,mf=1-f,paintIM=circ*f,gapIM=circ-paintIM,paintM=circ*mf,gapM=circ-paintM;
        imArc.setAttribute('stroke-dasharray',`${paintIM} ${gapIM}`);
        mtmArc.setAttribute('stroke-dasharray',`${paintM} ${gapM}`);
        mtmArc.setAttribute('stroke-dashoffset',-paintIM);
        ratio.textContent=`${p} : ${100-p}`;
      }
      function updateCalc(){
        const im=parseFloat(imRange.value),pr=+principal.value||0,c=+coupon.value||0, d=+haircut.value||0;
        const imAmt=pr*(100/(100-d)),mtmAmt=pr*((100-im)/im),income=imAmt*(c/100);
        couponIncome.textContent=`$${income.toLocaleString()}`;
        mtmValue.textContent=`$${mtmAmt.toLocaleString()}`; 	imValue.textContent=`$${imAmt.toLocaleString()}`;
      }
      imRange.addEventListener('input',()=>{imLabel.textContent=`${imRange.value}%`;updateArcs(+imRange.value);updateCalc()});
      [principal,coupon,haircut].forEach(el=>el.addEventListener('input',updateCalc));
      btn.addEventListener('click',()=>{btn.textContent='Claimed ✓';btn.disabled=true;alert('Demo only — 25 ClearTokens simulated for engagement.')});
      updateArcs(+imRange.value);updateCalc();
    })();
  </script>
</body>
</html>
